# ./aws_build_dcp_from_cl.sh のオプション

aws_build_dcp_from_cl.shはnohupによってバックグラウンドで処理される -notify オプションを入れておけば、ビルドが完了したタイミングでメール通知が来るように設定可能

```
usage: aws_build_dcp_from_cl.sh [ [-script <vivado_script>] | [-strategy BASIC | DEFAULT | EXPLORE | TIMING | CONGESTION] [-clock_recipe_a A0 | A1 | A2] [-clock_recipe_b B0 | B1] [-clock_recipe_c C0 | C1] [-run_aws_emulation] [-foreground] [-notify] | [-h] | [-H] | [-help] |  ]

By default the build is run in the background using nohup so that the
process will not be terminated if the terminal window is closed.
The window can be closed if it is running on your computer and the
network connection is lost. All build output will be redirected to a
log file called *.nohup.out.

The -foreground option runs the build in the foreground. All output will
go to the terminal and the build may be terminated if the terminal
is closed. This option is useful if you want to wait for the build
to complete. This option is safe if the terminal is running on the
AWS instance, for example on a GUI desktop on the instance.
```

# S3での設定

```
check_s3_bucket_policy.py \
    --dcp-bucket f1-backup \
    --dcp-key tarfiles/*.Developer_CL.tar \
    --logs-bucket f1-backup \
    --logs-key logfiles
```

```
{
       "Version": "2012-10-17",
       "Statement": [
           {
               "Sid": "Bucket level permissions",
               "Effect": "Allow",
               "Principal": {
                   "AWS": "arn:aws:iam::365015490807:root"
               },
               "Action": [
                   "s3:ListBucket"
               ],
               "Resource": "arn:aws:s3:::f1-backup"
           },
           {
               "Sid": "Object read permissions",
               "Effect": "Allow",
               "Principal": {
                   "AWS": "arn:aws:iam::365015490807:root"
               },
               "Action": [
                   "s3:GetObject"
               ],
               "Resource": "arn:aws:s3:::f1-backup/tarfiles/*.Developer_CL.tar"
           },
           {
               "Sid": "Folder write permissions",
               "Effect": "Allow",
               "Principal": {
                   "AWS": "arn:aws:iam::365015490807:root"
               },
               "Action": [
                   "s3:PutObject"
               ],
               "Resource": "arn:aws:s3:::f1-backup/logfiles/*"
           }
       ]
   }
```
